s = io["open"]("file.txt", "r");

print("file handle:", s); # this is the most cursed pointer manipulation i've ever done

read_num = || {
    local value = 0;
    ret = io["read"](s, "num", value);
    print("read: ", value);
};

while(|| { ret = read_num(); }, || {});

print("closed: ", io["close"](s));

s = io["open"]("file.txt", "r");
print("file handle:", s);

read_line = || {
    local value = "";
    ret = io["read"](s, "line", value);
    print("readln: ", value);
};

while(|| { ret = read_line(); }, || {});

print("closed: ", io["close"](s));

s = io["open"]("file.txt", "r");
print("file handle:", s);

print("BORDER" + io["read"](s, "all") + "BORDER");

print("closed: ", io["close"](s));
